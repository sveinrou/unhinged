{% extends "base.html" %}

{% block content %}
<div class="row mt-4">
  <div class="col-12 text-center">
    <h1>Rank {{ card_type|title }} Cards</h1>
    <a href="{% url 'profile_home' profile.id %}" class="btn btn-outline-secondary mb-4">Back to Home</a>
    
    {% if error %}
    <div class="alert alert-warning">
        {{ error }}
    </div>
    {% else %}
    
    {% if card1.prompt %}
    <div class="mb-4">
        <h3>Prompt: {{ card1.prompt.text }}</h3>
    </div>
    {% endif %}

    <div class="row align-items-center">
      <!-- Card 1 -->
      <div class="col-md-5">
        <div class="card h-100 shadow-sm hover-shadow">
          {% if card1.image %}
          <img src="{{ card1.image.url }}" class="card-img-top" alt="Card 1 Image" style="max-height: 400px; object-fit: contain;">
          {% endif %}
          <div class="card-body">
            {% if card1.answer %}
            <p class="card-text fs-4">{{ card1.answer }}</p>
            {% endif %}
            <form method="post" class="mt-3">
                {% csrf_token %}
                <input type="hidden" name="winner" value="{{ card1.id }}">
                <input type="hidden" name="loser" value="{{ card2.id }}">
                <button type="submit" class="btn btn-success btn-lg w-100">Vote for Left</button>
            </form>
          </div>
        </div>
      </div>

      <!-- VS Badge -->
      <div class="col-md-2 text-center my-3">
        <h2 class="fw-bold text-muted">VS</h2>
      </div>

      <!-- Card 2 -->
      <div class="col-md-5">
        <div class="card h-100 shadow-sm">
           {% if card2.image %}
          <img src="{{ card2.image.url }}" class="card-img-top" alt="Card 2 Image" style="max-height: 400px; object-fit: contain;">
          {% endif %}
          <div class="card-body">
            {% if card2.answer %}
            <p class="card-text fs-4">{{ card2.answer }}</p>
            {% endif %}
            <form method="post" class="mt-3">
                {% csrf_token %}
                <input type="hidden" name="winner" value="{{ card2.id }}">
                <input type="hidden" name="loser" value="{{ card1.id }}">
                <button type="submit" class="btn btn-success btn-lg w-100">Vote for Right</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    
    {% endif %}
  </div>
</div>
{% endblock %}

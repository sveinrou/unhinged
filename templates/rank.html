{% extends "base.html" %}

{% block content %}
<div class="row">
  <div class="col">
    <a href="{% url 'profile_home' profile.id %}" class="btn btn-outline-secondary btn-sm mb-0">Tilbake til hjem</a>
  </div>
</div>
<div class="row mt-0 pt-0 flex-grow-1 d-flex flex-column justify-content-center">
  <div class="col-12 text-center">
    
    {% if error %}
    <div class="alert alert-warning">
        {{ error }}
    </div>
    {% else %}
    
    {% if card1.prompt %}
    <div class="mb-0">
        <h3>Prompt: {{ card1.prompt.text }}</h3>
    </div>
    {% endif %}

    <div class="row align-items-center g-0 flex-grow-1 justify-content-center"> {# Added justify-content-center for horizontal centering #}
      <!-- Card 1 -->
      <div class="col-12 col-md-6 my-2 d-flex align-items-center justify-content-center"> {# Added d-flex align-items-center justify-content-center to col-12 for centering card vert/horiz #}
        <div class="card h-100 shadow-sm hover-shadow border-0">
          {% if card1.image %}
          <img src="{{ card1.image.url }}" class="card-img-top img-fluid ranking-image d-block mx-auto" alt="Card 1 Image">
          {% endif %}
          <div class="card-body px-1 py-0">
            {% if card1.answer %}
            <p class="card-text fs-6 mb-1">{{ card1.answer }}</p>
            {% endif %}
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="winner" value="{{ card1.id }}">
                <input type="hidden" name="loser" value="{{ card2.id }}">
                <button type="submit" class="btn btn-success btn-sm w-100 mt-0">Stem</button>
            </form>
          </div>
        </div>
      </div>

      <!-- Card 2 -->
      <div class="col-12 col-md-6 my-3 d-flex align-items-center justify-content-center"> {# Added d-flex align-items-center justify-content-center to col-12 #}
        <div class="card h-100 shadow-sm border-0">
           {% if card2.image %}
          <img src="{{ card2.image.url }}" class="card-img-top img-fluid ranking-image d-block mx-auto" alt="Card 2 Image">
          {% endif %}
          <div class="card-body px-1 py-0">
            {% if card2.answer %}
            <p class="card-text fs-6 mb-1">{{ card2.answer }}</p>
            {% endif %}
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="winner" value="{{ card2.id }}">
                <input type="hidden" name="loser" value="{{ card1.id }}">
                <button type="submit" class="btn btn-success btn-sm w-100 mt-0">Stem</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    
    {% endif %}
  </div>
</div>
<style>
    /* Styling for form elements to match Bootstrap design */
    input[type="text"], textarea, select, input[type="file"] {
        width: 100%;
        padding: 0.375rem 0.75rem;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #212529;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #ced4da;
        border-radius: 0.25rem;
        transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
    }
    input[type="checkbox"] {
        width: auto;
    }

    .ranking-image {
        max-height: 45vh; /* Max height 45% of viewport height */
        object-fit: contain;
        width: 100%; /* Ensure it takes full width of its container */
    }
    @media (max-width: 767.98px) { /* Adjust for smaller screens */
        .ranking-image {
            max-height: 30vh; /* Reduced from 35vh to 30vh for very small screens */
        }
        .col-6 { /* This rule was made redundant by col-12 change, but still present. Removing. */
            padding-left: 5px;
            padding-right: 5px;
        }
    }
</style>
{% endblock %}
